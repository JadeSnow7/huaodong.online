<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Agent Skillsï¼šå¤§æ¨¡å‹å·¥å…·è°ƒç”¨æœºåˆ¶ | å­¦ä¹ ç¬”è®°</title>
    <meta name="description" content="æ·±å…¥ç†è§£ LLM Agent çš„å·¥å…·è°ƒç”¨æœºåˆ¶ï¼Œæ„å»ºå¯éªŒè¯ã€å¯æ‰©å±•çš„æ™ºèƒ½ä»£ç†èƒ½åŠ›ã€‚" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
        href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;500;600;700&family=Space+Grotesk:wght@400;500;600;700&family=Fira+Code:wght@400;500&display=swap"
        rel="stylesheet" />
    <link rel="stylesheet" href="../styles.css" />
    <link rel="stylesheet" href="note-style.css" />
</head>

<body>
    <div class="backdrop" aria-hidden="true">
        <span class="orb orb--one"></span>
        <span class="orb orb--two"></span>
        <span class="orb orb--three"></span>
        <span class="grid"></span>
    </div>

    <header class="site-header">
        <a href="../index.html" class="brand">HU AODONG</a>
        <nav class="nav">
            <a href="../index.html#projects">ç²¾é€‰é¡¹ç›®</a>
            <a href="index.html" class="active">å­¦ä¹ ç¬”è®°</a>
            <a href="../resume.html">åœ¨çº¿ç®€å†</a>
        </nav>
    </header>

    <main class="note-container">
        <article class="note-article">
            <header class="note-header">
                <a href="index.html" class="note-back">â† è¿”å›ç¬”è®°åˆ—è¡¨</a>
                <span class="note-category ai">AI/LLM</span>
                <h1>Agent Skillsï¼šå¤§æ¨¡å‹å·¥å…·è°ƒç”¨æœºåˆ¶</h1>
                <div class="note-meta">
                    <span>ğŸ“… 2026-02-04</span>
                    <span>â±ï¸ çº¦ 12 åˆ†é’Ÿ</span>
                    <span>ğŸ·ï¸ Agent, Tool Calling, Function Calling</span>
                </div>
            </header>

            <div class="note-content">
                <h2>1. ä¸ºä»€ä¹ˆéœ€è¦å·¥å…·è°ƒç”¨ï¼Ÿ</h2>
                <p>å¤§è¯­è¨€æ¨¡å‹åœ¨æ•°å€¼è®¡ç®—æ—¶å®¹æ˜“äº§ç”Ÿ"å¿ƒç®—"é”™è¯¯ï¼Œå·¥å…·è°ƒç”¨æœºåˆ¶è®©æ¨¡å‹è¯†åˆ«ä½•æ—¶éœ€è¦å¤–éƒ¨å·¥å…·ï¼Œå¹¶å°†è®¡ç®—å§”æ‰˜ç»™<strong>å¯éªŒè¯çš„æ‰§è¡Œå™¨</strong>ã€‚</p>

                <div class="info-box">
                    <h4>ğŸ“¦ æ ¸å¿ƒä¼˜åŠ¿</h4>
                    <ul>
                        <li><strong>ç²¾ç¡®è®¡ç®—</strong>ï¼šé¿å…å¤§æ¨¡å‹"å¿ƒç®—"é”™è¯¯</li>
                        <li><strong>å¯éªŒè¯æ€§</strong>ï¼šè®¡ç®—è¿‡ç¨‹å¯å¤ç°ã€å¯æ£€éªŒ</li>
                        <li><strong>æ‰©å±•æ€§</strong>ï¼šå¯æ·»åŠ æ›´å¤šé¢†åŸŸå·¥å…·</li>
                        <li><strong>å¯è¿½æº¯æ€§</strong>ï¼šå·¥å…·è°ƒç”¨è®°å½•å¯ç”¨äºå®¡è®¡ä¸è®­ç»ƒ</li>
                    </ul>
                </div>

                <h2>2. å·¥å…·è°ƒç”¨æµç¨‹</h2>

                <pre><code class="language-text">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ç”¨æˆ·é—®é¢˜                              â”‚
â”‚  "è®¡ç®—é¢‘ç‡ 1GHz æ—¶é“œçš„è¶‹è‚¤æ·±åº¦"                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 Step 1: æ¨¡å‹åˆ¤æ–­                           â”‚
â”‚  LLM è¯†åˆ«éœ€è¦æ•°å€¼è®¡ç®—ï¼Œç”Ÿæˆ tool_call                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 Step 2: æ‰§è¡Œå·¥å…·                           â”‚
â”‚  è°ƒç”¨ evaluate_expressionï¼Œè®¡ç®— Î´ = âˆš(2/Ï‰Î¼Ïƒ)              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 Step 3: ç»“æœæ³¨å…¥                           â”‚
â”‚  å°† tool_result æ·»åŠ åˆ°å¯¹è¯ä¸Šä¸‹æ–‡                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 Step 4: ç”Ÿæˆå›ç­”                           â”‚
â”‚  LLM åŸºäºå·¥å…·ç»“æœç”Ÿæˆæ•™å­¦åŒ–è§£é‡Š                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</code></pre>

                <h2>3. å·¥å…·å®šä¹‰è§„èŒƒ</h2>

                <pre><code class="language-python">TOOLS = [
    {
        "type": "function",
        "function": {
            "name": "evaluate_expression",
            "description": "è®¡ç®—æ•°å­¦è¡¨è¾¾å¼æˆ–ç‰©ç†å…¬å¼",
            "parameters": {
                "type": "object",
                "properties": {
                    "expression": {
                        "type": "string",
                        "description": "æ•°å­¦è¡¨è¾¾å¼ï¼Œå¦‚ 'sqrt(2/(omega*mu*sigma))'"
                    },
                    "variables": {
                        "type": "object",
                        "description": "å˜é‡å€¼æ˜ å°„"
                    }
                },
                "required": ["expression"]
            }
        }
    },
    {
        "type": "function",
        "function": {
            "name": "run_simulation",
            "description": "è¿è¡Œè¯¾ç¨‹æ•°å€¼ä»¿çœŸ",
            "parameters": {
                "type": "object",
                "properties": {
                    "sim_type": {
                        "type": "string",
                        "enum": ["laplace2d", "point_charges", "wave_1d"]
                    },
                    "params": {"type": "object"}
                },
                "required": ["sim_type"]
            }
        }
    }
]</code></pre>

                <h2>4. ä»£ç å®ç°ç¤ºä¾‹</h2>

                <pre><code class="language-python">async def chat_with_tools(query: str, tools: list) -> str:
    messages = [
        {"role": "system", "content": SYSTEM_PROMPT},
        {"role": "user", "content": query}
    ]
    
    # Step 1: è®©æ¨¡å‹åˆ¤æ–­æ˜¯å¦éœ€è¦å·¥å…·
    response = await llm.generate(messages, tools=tools)
    
    # Step 2: å¦‚æœè¿”å› tool_callï¼Œæ‰§è¡Œå·¥å…·
    if response.tool_calls:
        for call in response.tool_calls:
            result = await execute_tool(
                call.function.name, 
                call.function.arguments
            )
            
            # Step 3: å°†å·¥å…·ç»“æœæ³¨å…¥ä¸Šä¸‹æ–‡
            messages.append({
                "role": "assistant",
                "content": None,
                "tool_calls": [call]
            })
            messages.append({
                "role": "tool",
                "tool_call_id": call.id,
                "content": json.dumps(result)
            })
        
        # Step 4: è®©æ¨¡å‹åŸºäºç»“æœç”Ÿæˆå›ç­”
        final_response = await llm.generate(messages)
        return final_response.content
    
    return response.content</code></pre>

                <h2>5. Skills ä¸ Tools çš„åŒºåˆ«</h2>

                <table class="note-table">
                    <thead>
                        <tr>
                            <th>æ¦‚å¿µ</th>
                            <th>å®šä¹‰</th>
                            <th>ç¤ºä¾‹</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>Skills</strong></td>
                            <td>ç»„ç»‡æç¤ºæ¨¡æ¿ä¸äº¤äº’æ¨¡å¼</td>
                            <td>tutorï¼ˆæ•™å­¦ï¼‰, graderï¼ˆæ‰¹æ”¹ï¼‰</td>
                        </tr>
                        <tr>
                            <td><strong>Tools</strong></td>
                            <td>å¯è®¡ç®—ã€å¯éªŒè¯çš„å¤–éƒ¨èƒ½åŠ›</td>
                            <td>ç§¯åˆ†è®¡ç®—ã€ä»¿çœŸè¿è¡Œã€å­—æ•°ç»Ÿè®¡</td>
                        </tr>
                    </tbody>
                </table>

                <h2>6. å®‰å…¨ä¸é™åˆ¶</h2>

                <div class="warning-box">
                    <h4>âš ï¸ å·¥å…·è°ƒç”¨å®‰å…¨ç­–ç•¥</h4>
                    <ul>
                        <li>ä½¿ç”¨ <strong>allowlist</strong> é™åˆ¶å¯è°ƒç”¨çš„å·¥å…·é›†åˆ</li>
                        <li>è®¾ç½®<strong>æœ€å¤§è°ƒç”¨æ¬¡æ•°</strong>ï¼ˆå¦‚æ¯è½®å¯¹è¯æœ€å¤š 3 æ¬¡ï¼‰</li>
                        <li>é…ç½®<strong>è¶…æ—¶é™åˆ¶</strong>ï¼Œé˜²æ­¢é•¿æ—¶é—´é˜»å¡</li>
                        <li>è®°å½•å·¥å…·è°ƒç”¨æ—¥å¿—ï¼Œç”¨äºå®¡è®¡ä¸é—®é¢˜æ’æŸ¥</li>
                    </ul>
                </div>

                <h2>7. å·¥å…·è°ƒç”¨ SFT è®­ç»ƒ</h2>
                <p>ä¸ºäº†è®©æ¨¡å‹æ­£ç¡®è¯†åˆ«è°ƒç”¨æ—¶æœºï¼Œéœ€è¦æ„å»ºä¸‰ç±»è®­ç»ƒæ ·æœ¬ï¼š</p>

                <div class="info-box">
                    <h4>ğŸ“Š æ ·æœ¬ç±»å‹</h4>
                    <ol>
                        <li><strong>åº”è°ƒç”¨å·¥å…·</strong>ï¼šå¸¦ tool_call + tool_result + æœ€ç»ˆè§£é‡Š</li>
                        <li><strong>ä¸åº”è°ƒç”¨å·¥å…·</strong>ï¼šç›´æ¥æ¨ç†/è§£é‡Šå³å¯çš„é—®é¢˜</li>
                        <li><strong>å»¶è¿Ÿè°ƒç”¨</strong>ï¼šå…ˆæ•™å­¦è§£é‡Š/å»ºæ¨¡ï¼Œå†æ˜ç¡®è¯´æ˜éœ€è¦ç²¾ç¡®è®¡ç®—</li>
                    </ol>
                </div>

                <pre><code class="language-json">{
  "id": "tool-0001",
  "mode": "sim_tutor",
  "messages": [
    {"role": "user", "content": "è®¡ç®—é“œåœ¨ 1GHz çš„è¶‹è‚¤æ·±åº¦"},
    {
      "role": "assistant",
      "content": null,
      "tool_calls": [{
        "id": "call_001",
        "function": {
          "name": "evaluate_expression",
          "arguments": "{\"expression\": \"sqrt(2/(omega*mu*sigma))\"}"
        }
      }]
    },
    {
      "role": "tool",
      "tool_call_id": "call_001",
      "content": "{\"value\": 2.09e-6, \"unit\": \"m\"}"
    },
    {"role": "assistant", "content": "### ç»“è®º\né“œåœ¨ 1GHz æ—¶çš„è¶‹è‚¤æ·±åº¦çº¦ä¸º 2.09 Î¼m..."}
  ]
}</code></pre>

                <h2>8. æ‰©å±•å·¥å…·é›†</h2>

                <table class="note-table">
                    <thead>
                        <tr>
                            <th>å·¥å…·åç§°</th>
                            <th>åŠŸèƒ½</th>
                            <th>API ç«¯ç‚¹</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>calculate_integral</td>
                            <td>ç¬¦å·/æ•°å€¼ç§¯åˆ†</td>
                            <td>/api/v1/calc/integrate</td>
                        </tr>
                        <tr>
                            <td>calculate_derivative</td>
                            <td>ç¬¦å·/æ•°å€¼å¾®åˆ†</td>
                            <td>/api/v1/calc/differentiate</td>
                        </tr>
                        <tr>
                            <td>evaluate_expression</td>
                            <td>è¡¨è¾¾å¼æ±‚å€¼</td>
                            <td>/api/v1/calc/evaluate</td>
                        </tr>
                        <tr>
                            <td>run_simulation</td>
                            <td>è¯¾ç¨‹ä»¿çœŸ</td>
                            <td>/api/v1/sim/*</td>
                        </tr>
                        <tr>
                            <td>count_words</td>
                            <td>å­—æ•°ç»Ÿè®¡</td>
                            <td>/api/v1/text/count</td>
                        </tr>
                        <tr>
                            <td>check_citation_style</td>
                            <td>å¼•ç”¨æ ¼å¼æ£€æŸ¥</td>
                            <td>/api/v1/text/citation</td>
                        </tr>
                    </tbody>
                </table>

                <div class="tip-box">
                    <h4>ğŸ’¡ æœ€ä½³å®è·µ</h4>
                    <ol>
                        <li>å·¥å…·æ¥å£é‡‡ç”¨ç»“æ„åŒ– JSON schema æè¿°å…¥å‚</li>
                        <li>å·¥å…·è°ƒç”¨è®°å½•å…¥å‚ã€å‡ºå‚ä¸æ‰§è¡Œè€—æ—¶</li>
                        <li>è¯„æµ‹æ—¶ç»Ÿè®¡å·¥å…·è°ƒç”¨å‡†ç¡®ç‡ï¼ˆå‡½æ•°å/å‚æ•°ï¼‰</li>
                        <li>åœ¨ system prompt ä¸­æ˜ç¡®è¯´æ˜å¯ç”¨å·¥å…·åˆ—è¡¨</li>
                    </ol>
                </div>

                <h2>9. å¸¸è§é—®é¢˜</h2>

                <div class="qa-box">
                    <p class="question">Q: æ¨¡å‹ä¸è°ƒç”¨å·¥å…·æ€ä¹ˆåŠï¼Ÿ</p>
                    <p class="answer">A: æ£€æŸ¥ system prompt æ˜¯å¦åŒ…å«å·¥å…·è¯´æ˜ï¼Œå¹¶åœ¨ SFT æ•°æ®ä¸­å¢åŠ "åº”è°ƒç”¨å·¥å…·"çš„æ­£ä¾‹æ ·æœ¬ã€‚</p>
                </div>

                <div class="qa-box">
                    <p class="question">Q: å¦‚ä½•é˜²æ­¢å·¥å…·è¢«æ»¥ç”¨ï¼Ÿ</p>
                    <p class="answer">A: ä½¿ç”¨ allowlist é™åˆ¶å·¥å…·é›†åˆï¼Œè®¾ç½®è°ƒç”¨æ¬¡æ•°ä¸Šé™ï¼Œå¹¶è®°å½•å®Œæ•´çš„è°ƒç”¨æ—¥å¿—ç”¨äºå®¡è®¡ã€‚</p>
                </div>
            </div>

            <footer class="note-footer">
                <div class="note-nav">
                    <a href="ai-distillation.html" class="prev">â† å¤§æ¨¡å‹è’¸é¦æŠ€æœ¯</a>
                    <a href="ai-npu-fpga.html" class="next">NPU/FPGA åŠ é€Ÿ â†’</a>
                </div>
            </footer>
        </article>
    </main>

    <footer class="site-footer">
        <p>Â© Hu Aodong Â· Crafted for GitHub Pages</p>
    </footer>
</body>

</html>